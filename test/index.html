<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>data-table</title>

  <link rel="stylesheet" href="bootstrap/dist/css/bootstrap.min.css">
  <style>
    * {
      box-sizing: border-box; 
    }

    .container {
      margin-top: 5em;
    }

    th.right {
      border-right: 2px solid #666;
      border-left: 0;
    }
    
    th.left {
      border-left: 2px solid #666;
      border-right: 0;
    }

    .type-data {
      background-color: #506D7D; 
    }

    .type-blah {
      background-color: #94CCB9;
    }

    [draggable] {
      cursor: move;

      -moz-user-select: none;
      -khtml-user-select: none;
      -webkit-user-select: none;
      user-select: none;
      /* Required to make elements draggable in old WebKit */
      -khtml-user-drag: element;
      -webkit-user-drag: element;
    }

    tr.over th.right,
    tr.over th.left {
      background-color: #eee;
    }

    .header-item-bin.over .well {
      background-color: #ddd;
    }
  </style>
</head>

<body>
  <script src="jquery/dist/jquery.min.js"></script>
  <script src="handlebars/handlebars.js"></script>
  <script src="ember/ember.js"></script>
  <script src="ember-data/ember-data.js"></script>
  <script src="data-table.js"></script>
  <script src="bootstrap/dist/js/bootstrap.min.js"></script>

  <!-- application.hbs template -->
  <script type="text/x-handlebars">
    <div class="container">
      {{data-table dataset=content defaultColumns=defaultColumns}}
    </div>
  </script>

  <script>
    var App = Ember.Application.create();

    App.ApplicationAdapter = DS.FixtureAdapter;

    App.DataModel = DS.Model.extend({
      name: DS.attr('string'),
      state: DS.attr('string'),
      nickname: DS.attr('string')
    });

    App.BlahModel = DS.Model.extend({
      name: DS.attr('string'),
      age: DS.attr('number'),
      color: DS.attr('string')
    });

    App.DataModel.reopenClass({
      FIXTURES: [
        {
          id: 1,
          name: 'Bob',
          nickname: 'Bobby',
          state: 'CT'
        }, {
          id: 2,
          name: 'Janet',
          nickname: 'Jan',
          state: 'NJ'
        }, {
          id: 3,
          name: 'John',
          nickname: 'J',
          state: 'WY'
        }
      ]
    });

    App.BlahModel.reopenClass({
      FIXTURES: [
        {
          id: 1,
          name: 'foo',
          age: 15,
          color: 'red'
        }
      ]
    });

    App.ApplicationRoute = Ember.Route.extend({
      model: function () {
        return Ember.RSVP.all([this.store.find('data'), this.store.find('blah')]).then(function (data) {
          return data[0].get('content').concat(data[1].get('content'));
        });
      }
    });

    App.ApplicationController = Ember.ArrayController.extend({
      defaultColumns: ['Name'],

      columns: [
        Ember.Object.create({ name: 'Name', attributes: ['name'] }),
        Ember.Object.create({ name: 'State', attributes: ['us_state', 'state'] }),
        Ember.Object.create({ name: 'Nickname', attributes: ['nickname'] })
      ],
      datasets: [
        [ 
          { name: 'Bob', state: 'CT', nickname: 'Bobby' },
          { name: 'Janet', state: 'NJ', nickname: 'Jan' }
        ],
        [
          { name: 'John', us_state: 'NY', nickname: 'J' }
        ]
      ]
    });
  </script>
  <script src="//localhost:35729/livereload.js"></script>
</body>
</html>
