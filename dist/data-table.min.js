!function(t){var e=(t.ObjectController.extend({}),t.Component.extend({classNameBindings:["over"],dragOver:function(t){t.preventDefault()},drop:function(t){var e=t.dataTransfer.getData("text/data"),a=this.get("columns").findBy("name",e);this.get("columns").pushObject(a)},dragEnter:function(){this.set("over",!0)},dragLeave:function(){this.set("over",!1)}})),a=t.Component.extend({classNames:["label","label-default"],attributeBindings:["draggable"],draggable:"true",dragStart:function(t){t.dataTransfer.setData("text/data",this.get("content.name"))},dragEnd:function(t){"copy"===t.dataTransfer.dropEffect&&(this.destroy(),"th"===this.get("parentView.tagName")&&this.get("parentView").destroy())}}),n=t.CollectionView.extend({tagName:"tr",classNameBindings:["over"],itemViewClass:t.View.extend({tagName:"th",templateName:"components/data-table-header-collection-item"}),defaultHeaderItemChanged:function(){var t=this.get("content")||[],e=this.get("parentView.defaultHeaderItem");t.pushObject(e),this.set("content",t)}.observes("parentView.defaultHeaderItem").on("init"),dragOver:function(t){t.preventDefault()},dragEnter:function(){this.set("over",!0)},dragLeave:function(){this.set("over",!1)},drop:function(t){var e=t.dataTransfer.getData("text/data"),a=this.get("parentView.columns").findBy("name",e),n=this.get("content");n.contains(a)||this.get("content").pushObject(a),this.set("over",!1)}}),r=t.Component.extend({tagName:"table",classNames:["table","table-responsive","table-hover","table-condensed"],defaultHeaderItem:{name:"Name",attributes:["name"]},data:function(){var e=this.get("datasets"),a=this.get("columns"),n=this;if(!t.isArray(e))throw new Error("Datasets input must be an array.");return e.reduce(function(e,r){if(!t.isArray(r))throw new Error("Dataset must be an array.");var i=r.map(function(t){return a?n.columnAttributeMap(a,t):[t]});return e.concat(i)},[])}.property("datasets"),columnAttributeMap:function(t,e){if(e){var a,n=[],r=0;for(a in e)if(e.hasOwnProperty(a)){for(;r<t.length;r++)t[r].attributes.contains(a)&&n.splice(r,0,e[a]);r=0}return n}}});t.Application.initializer({name:"data-table",initialize:function(t){t.register("component:data-table",r),t.register("view:data-table-header",n),t.register("component:data-table-header-bin",e),t.register("component:data-table-header-item",a)}})}(window.Ember);